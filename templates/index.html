<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ ui.title[lang] }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Add Choices.js library if you want searchable dropdown -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
</head>
<body>
<div class="lang-switch">
    <a href="/?lang=en" class="lang-link {% if lang == 'en' %}active{% endif %}">üá¨üáß English</a> |
    <a href="/?lang=es" class="lang-link {% if lang == 'es' %}active{% endif %}">üá™üá∏ Espa√±ol</a>
</div>

<div class="container">
    <h1>üê± {{ ui.title[lang] }}</h1>

    <div class="form-card">
        <form method="POST" action="/?lang={{ lang }}">
            <div class="form-group">
                <label for="name">{{ ui.cat_name[lang] }}</label>
                <input type="text" id="name" name="name" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="years">{{ ui.age[lang] }} ({{ ui.years[lang] }})</label>
                    <input type="number" id="years" name="years" min="0" max="25" value="0" required>
                </div>
                <div class="form-group">
                    <label for="months">{{ ui.age[lang] }} ({{ ui.months[lang] }})</label>
                    <input type="number" id="months" name="months" min="0" max="11" value="0">
                </div>
            </div>

            <div class="form-group">
                <label for="breed">{{ ui.breed[lang] }}</label>
                <select id="breed" name="breed" required>
                    {% for breed_key in all_breeds %}
                        <option value="{{ breed_key }}">{{ breeds[breed_key][lang] }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="weight">{{ ui.weight[lang] }}</label>
                <input type="number" id="weight" name="weight" step="0.1" min="0.5" max="15" required>
            </div>

            <button type="submit" class="btn-primary">{{ ui.calculate[lang] }}</button>
        </form>
    </div>

    {% if result %}
    {% if result.error %}
        <div class="result-card warning-card">
            <h3>‚ùå Error</h3>
            <p>{{ result.error_message }}</p>
        </div>
    {% else %}
        <div class="result-section">
            <div class="result-card profile-card">
                <h2>{{ result.name }} üêæ</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">{{ ui.age[lang] }}:</span>
                        <span class="value">{{ result.years }} {{ ui.years[lang] }}{% if result.months > 0 %}, {{ result.months }} {{ ui.months[lang] }}{% endif %}</span>
                    </div>
                    <div class="info-item">
                        <span class="label">{{ ui.human_age[lang] }}</span>
                        <span class="value highlight">{{ result.human_age }} {{ ui.years[lang] }}</span>
                    </div>
                    <div class="info-item">
                        <span class="label">{{ ui.breed[lang] }}:</span>
                        <span class="value">{{ result.breed }}</span>
                    </div>
                </div>
                <div class="breed-description">
                    <p><em>{{ result.breed_description }}</em></p>
                </div>
            </div>

            <div class="result-card weight-card">
                <h3>‚öñÔ∏è {{ ui.weight_status[lang] }}</h3>
                <p class="current-weight">{{ ui.weight[lang] }}: <strong>{{ result.weight }} kg</strong></p>
                <p class="ideal-weight">{{ ui.ideal_weight[lang] }} <strong>{{ result.ideal_weight }}</strong></p>
                <p class="weight-status {{ result.weight_status }}">{{ result.weight_message }}</p>
            </div>
        </div>
    {% endif %}
    {% endif %}

    <p class="disclaimer">‚ö†Ô∏è {{ ui.disclaimer[lang] }}</p>
</div>

<!-- Choices.js for searchable dropdown -->
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<script>
    const breedSelect = document.getElementById('breed');
    const choices = new Choices(breedSelect, { searchEnabled: true, itemSelectText: '' });
</script>
</body>
</html>